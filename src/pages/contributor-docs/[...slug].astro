---
import { getCollection } from "astro:content";

export async function getStaticPaths() {
  /**
   * The slug of the entry in this collection that we want to
   * use as the index page
   *
   * For example: `contributor-docs/es/` will show
   * the content from `contributor-docs/es/readme`
   */
  const indexPageName = "readme";
  const contributorDocs = await getCollection("contributor-docs");
  return contributorDocs.map((entry) => {
    // Use the `indexPageName` as the route
    // for whatever folder its in
    const slug = entry.slug.endsWith(indexPageName)
      ? entry.slug.slice(0, -indexPageName.length)
      : entry.slug;
    return {
      params: {
        slug,
      },
      props: { entry },
    };
  });
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Content />
